# Netlifyè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
[build]
  command = '''
    # ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ä½œæˆ
    cp _config.yml _config.yml.emergency-backup
    
    # ãƒ•ã‚§ã‚¤ãƒ«ã‚»ãƒ¼ãƒ•æ©Ÿèƒ½ä»˜ã_config.ymlç”Ÿæˆ
    cat > _config.yml.new << 'CONFIGEOF'
# ç’°å¢ƒå¤‰æ•°ç‰ˆ_config.ymlï¼ˆãƒ•ã‚§ã‚¤ãƒ«ã‚»ãƒ¼ãƒ•ä»˜ãï¼‰
title: "${SITE_TITLE:-ğŸŒ» ã²ã¾ã‚ã‚Šæ²»ç™‚é™¢ ğŸŒ»}"
description: "${SITE_DESCRIPTION:-å¤§é˜ªå¸‚ã§ã®è¨ªå•ãƒãƒƒã‚µãƒ¼ã‚¸ãƒ»åœ¨å®…åŒ»ç™‚ãƒãƒƒã‚µãƒ¼ã‚¸ã€‚è„ŠæŸ±ç®¡ç‹­çª„ç—‡ã€è„³æ¢—å¡ã€ãƒ‘ãƒ¼ã‚­ãƒ³ã‚½ãƒ³ç—…ãªã©å„ç¨®å‚·ç—…ã«å¯¾å¿œã€‚åŒ»ç™‚ä¿é™ºé©ç”¨ã§å®‰å¿ƒã€‚}"
baseurl: ""
url: "${SITE_URL:-https://himawari-massage.jp}"

# SEOè¨­å®š
author: "${COMPANY_NAME:-ã²ã¾ã‚ã‚Šæ²»ç™‚é™¢}"
lang: "ja"
locale: "ja_JP"

# Jekyllè¨­å®š
markdown: kramdown
highlighter: rouge
future: true
plugins:
  - jekyll-feed
  - jekyll-sitemap
  - jekyll-seo-tag
  - jekyll-paginate

header_pages: []
google_site_verification:

# å¯¾å¿œå‚·ç—…ï¼ˆé™çš„ãƒ‡ãƒ¼ã‚¿ï¼‰
conditions: ["è„ŠæŸ±ç®¡ç‹­çª„ç—‡", "è„³æ¢—å¡", "ãƒ‘ãƒ¼ã‚­ãƒ³ã‚½ãƒ³ç—…", "é ¸æ¤ç—‡", "å¤‰å½¢æ€§é–¢ç¯€ç—‡", "è„Šé«„æå‚·", "è„³è¡€ç®¡éšœå®³", "è…°æ¤ç—‡", "äº”åè‚©", "è†é–¢ç¯€ç—‡", "ãƒªã‚¦ãƒãƒ", "åéª¨ç¥çµŒç—›", "æ¤é–“æ¿ãƒ˜ãƒ«ãƒ‹ã‚¢", "éª¨ç²—é¬†ç—‡", "ç­‹èç¸®", "é–¢ç¯€æ‹˜ç¸®"]

# å¯¾å¿œåœ°åŸŸï¼ˆé™çš„ãƒ‡ãƒ¼ã‚¿ï¼‰  
areas: ["æµªé€ŸåŒº", "ä¸­å¤®åŒº", "è¥¿åŒº", "æ¸¯åŒº", "å¤§æ­£åŒº", "å¤©ç‹å¯ºåŒº", "é˜¿å€é‡åŒº", "ä½ä¹‹æ±ŸåŒº", "ä½å‰åŒº", "æ±ä½å‰åŒº", "å¹³é‡åŒº", "ç”Ÿé‡åŒº", "æ±æˆåŒº", "æ—­åŒº", "åŸæ±åŒº", "é¶´è¦‹åŒº", "æ·€å·åŒº", "è¥¿æ·€å·åŒº", "æ±æ·€å·åŒº", "åŒ—åŒº", "ç¦å³¶åŒº", "æ­¤èŠ±åŒº", "è¥¿æˆåŒº", "éƒ½å³¶åŒº"]

paginate: 20
paginate_path: '/archive/page:num/'
permalink: /:categories/:title/

collections:
  posts:
    output: true
CONFIGEOF

    # YAMLæ§‹æ–‡ãƒã‚§ãƒƒã‚¯
    ruby -e "require 'yaml'; YAML.load_file('_config.yml.new')" || { echo "YAMLæ§‹æ–‡ã‚¨ãƒ©ãƒ¼æ¤œå‡º - ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‹ã‚‰å¾©æ—§"; cp _config.yml.emergency-backup _config.yml; exit 1; }
    
    # æ­£å¸¸ãªã‚‰é©ç”¨
    mv _config.yml.new _config.yml
    
    # business.ymlç”Ÿæˆ
    echo "# ç’°å¢ƒå¤‰æ•°ã‹ã‚‰ãƒ“ã‚¸ãƒã‚¹è¨­å®šã‚’ç”Ÿæˆ" > _data/business.yml
    echo "company_name: \"${COMPANY_NAME:-ã²ã¾ã‚ã‚Šæ²»ç™‚é™¢}\"" >> _data/business.yml
    echo "license: \"${LICENSE:-ã‚ã‚“æ‘©ãƒãƒƒã‚µãƒ¼ã‚¸æŒ‡åœ§å¸«}\"" >> _data/business.yml
    echo "phone: \"${CLINIC_PHONE:-080-4769-0101}\"" >> _data/business.yml
    echo "business_hours: \"${BUSINESS_HOURS:-æ¯æ—¥8:00-21:00å–¶æ¥­}\"" >> _data/business.yml
    echo "business_days: \"${BUSINESS_DAYS:-å¹´ä¸­ç„¡ä¼‘}\"" >> _data/business.yml
    echo "main_site_url: \"${MAIN_SITE_URL:-https://peraichi.com/landing_pages/view/himawari-massage/}\"" >> _data/business.yml
    echo "service_area: \"${SERVICE_AREA:-å¤§é˜ªå¸‚å†…å…¨åŸŸ}\"" >> _data/business.yml
    echo "base_address: \"${BASE_ADDRESS:-å¤§é˜ªå¸‚æµªé€ŸåŒº}\"" >> _data/business.yml
    
    bundle exec jekyll build
  '''
  publish = "_site"
  
[build.environment]
  JEKYLL_ENV = "production"
  NODE_VERSION = "18"
  RUBY_VERSION = "3.1.0"

# ç’°å¢ƒå¤‰æ•°å‡¦ç†ã®è¨­å®š
[build.processing]
  skip_processing = false

# Jekyll å°‚ç”¨è¨­å®š
[[plugins]]
  package = "@netlify/plugin-jekyll-cache"

# ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆè¨­å®šï¼ˆå°†æ¥çš„ã«ä½¿ç”¨ï¼‰
[[redirects]]
  from = "/old-path/*"
  to = "/new-path/:splat"
  status = 301
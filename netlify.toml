# Netlify設定ファイル
[build]
  command = '''
    echo "# 環境変数からビジネス設定を生成" > _data/business.yml
    echo "company_name: \"$COMPANY_NAME\"" >> _data/business.yml
    echo "license: \"$LICENSE\"" >> _data/business.yml
    echo "phone: \"$CLINIC_PHONE\"" >> _data/business.yml
    echo "business_hours: \"$BUSINESS_HOURS\"" >> _data/business.yml
    echo "business_days: \"$BUSINESS_DAYS\"" >> _data/business.yml
    echo "main_site_url: \"$MAIN_SITE_URL\"" >> _data/business.yml
    echo "service_area: \"$SERVICE_AREA\"" >> _data/business.yml
    echo "base_address: \"$BASE_ADDRESS\"" >> _data/business.yml
    bundle exec jekyll build
  '''
  publish = "_site"
  
[build.environment]
  JEKYLL_ENV = "production"
  NODE_VERSION = "18"
  RUBY_VERSION = "3.1.0"

# 環境変数処理の設定
[build.processing]
  skip_processing = false

# Jekyll 専用設定
[[plugins]]
  package = "@netlify/plugin-jekyll-cache"

# リダイレクト設定（将来的に使用）
[[redirects]]
  from = "/old-path/*"
  to = "/new-path/:splat"
  status = 301
# Netlify設定ファイル
[build]
  command = "echo 'Starting build...' && ruby --version && gem --version && gem install jekyll -v 4.2.0 --no-document && gem install bundler --no-document && bundle config set --local path 'vendor/bundle' && bundle install --verbose && echo 'Dependencies installed, building site...' && bundle exec jekyll build --verbose"
  publish = "_site"
  
[build.environment]
  JEKYLL_ENV = "production"
  NODE_VERSION = "18"
  RUBY_VERSION = "3.2.0"
  BUNDLE_CACHE = "false"

# 環境変数処理の設定
[build.processing]
  skip_processing = false

# Jekyll 専用設定 - キャッシュプラグインを無効化してデータファイル問題を回避
# [plugins]
#   package = "@netlify/plugin-jekyll-cache"

# リダイレクト設定
[[redirects]]
  from = "/2025/08/09/test-permalink"
  to = "/"
  status = 301

[[redirects]]
  from = "/2025/08/09/test-permalink/"
  to = "/"
  status = 301